<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product</title>
    <link rel="stylesheet" href="/css/products.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&family=Roboto:ital,wght@0,100..900;1,100..900&family=Vazirmatn:wght@100..900&display=swap"
        rel="stylesheet">
</head>

<body>
    <header class="header">
        <div class="logo">
            <img src="/Recources/Logo.png" />
        </div>
        <div class="search">
            <div class="search-box">
                <button><img src="/Recources/Search.png" /></button>
                <input type="text" placeholder="Search">

            </div>
        </div>

        <div class="list">
            <ul class="list-links">
                <li><a href="/">Home</a></li>
                <li><a>About</a></li>
                <li><a>Contact us</a></li>
                <li><a>blog</a></li>
            </ul>
        </div>
        <div class="icons">
            <a>
                <img class="one" src="/Recources/1.png" />
            </a>
            <a href="/shoppingCard">
                <img class="two" src="/Recources/Cart1.png" />
            </a>
            <a href="/login_signup">
                <img class="three" src="/Recources/Vector.png" />
            </a>
        </div>
    </header>
    <main>
        <div class="left__main">
            <div class="smalls">
                <div class="smallPhone"><img src="/Recources/iphone.png" alt=""></div>
                <div class="smallPhone"><img src="/Recources/iphone.png" alt=""></div>
                <div class="smallPhone"><img src="/Recources/iphone.png" alt=""></div>
                <div class="smallPhone"><img src="/Recources/iphone.png" alt=""></div>

            </div>
            <div class="bigPhone"><img src="/Recources/image/<%= content.id %>_<%= content.name %>/1.png" alt=""></div>

        </div>
        <div class="right__main">
            <h1>
                <%=content.name%>
            </h1>
            <div class="priceTag">
                <h3 class="mainPrice">$<%=content.price%>
                </h3>
                <!-- <h3 class="offPrice">$1699</h3> -->
            </div>
            <div class="selectColor">
                <div>Select Color:</div>
                <div class="colors" style="background-color: black;"></div>
                <div class="colors" style="background-color: #781DBC;"></div>
                <div class="colors" style="background-color: #E10000;"></div>
                <div class="colors" style="background-color: #E1B000;"></div>
                <div class="colors" style="background-color: #E8E8E8;"></div>
            </div>
            <div class="storage">
                <div class="storages">128GB</div>
                <div class="storages">256GB</div>
                <div class="storages">512GB</div>
                <div class="storages"><button>1TB</button></div>
            </div>
            <div class="properties">
                <div class="property">
                    <img src="/Recources/p-SVGs/Screensize.svg" alt="">
                    <div class="p-Cont">
                        <div>
                            <%= detail[0].specification_name %>
                        </div>
                        <div style="color: #4E4E4E;">
                            <%= detail[0].value %>
                        </div>
                    </div>
                </div>
                <div class="property">
                    <img src="/Recources/p-SVGs/smartphone-rotate-2-svgrepo-com 2.svg" alt="">

                    <div class="p-Cont">
                        <div>
                            <%= detail[1].specification_name %>
                        </div>
                        <div style="color: #4E4E4E;">
                            <%= detail[1].value %>
                        </div>
                    </div>
                </div>
                <div class="property">
                    <img src="/Recources/p-SVGs/smartphone-rotate-3-svgrepo-com 2.svg" alt="">

                    <div class="p-Cont">
                        <div>
                            <%= detail[2].specification_name %>
                        </div>
                        <div style="color: #4E4E4E;">
                            <%= detail[2].value %>
                        </div>
                    </div>
                </div>
                <div class="property">
                    <img src="/Recources/p-SVGs/smartphone-rotate-4-svgrepo-com 2.svg" alt="">

                    <div class="p-Cont">
                        <div>
                            <%= detail[3].specification_name %>
                        </div>
                        <div style="color: #4E4E4E;">
                            <%= detail[3].value %>
                        </div>
                    </div>
                </div>
                <div class="property">
                    <img src="/Recources/p-SVGs/smartphone-rotate-5-svgrepo-com 2.svg" alt="">

                    <div class="p-Cont">
                        <div>
                            <%= detail[4].specification_name %>
                        </div>
                        <div style="color: #4E4E4E;">
                            <%= detail[4].value %>
                        </div>
                    </div>
                </div>
                <div class="property">
                    <img src="/Recources/p-SVGs/smartphone-rotate-2-svgrepo-com 6.svg" alt="">

                    <div class="p-Cont">
                        <div>
                            <%= detail[5].specification_name %>
                        </div>
                        <div style="color: #4E4E4E;">
                            <%= detail[5].value %>
                        </div>
                    </div>
                </div>

            </div>
            <!-- <p class="raw-Text">Enhanced capabilities thanks toan enlarged display of 6.7 inchesand work without
                rechargingthroughout the
                day. Incredible photosas in weak, yesand in bright lightusing the new systemwith two cameras more...</p> -->
            <div class="addButtons">
                <button class="white-add">Add to Wishlist</button>
                <button class="black-add"><a href="/<%=content.id%>/add-to-cart" style="color: #E8E8E8;">Add to Card</a></button>
            </div>
            <div class="second__property">
                <div class="2nd-proprty"></div>
                <div class="2nd-proprty"></div>
                <div class="2nd-proprty"></div>
            </div>
            <section class="khadamat">
                <div class="kh-Cont">
                    <div class="kh-Icon">
                        <img src="/Recources/kh-SVGs/delivery-truck-svgrepo-com (1) 1.svg" alt="">
                    </div>
                    <div class="p-Cont">
                        <div>Free Delivery</div>
                        <div style="color: black;">1-2 day</div>
                    </div>
                </div>
                <div class="kh-Cont">
                    <div class="kh-Icon">
                        <img src="/Recources/kh-SVGs/delivery-truck-svgrepo-com (1) 1.svg" alt="">
                    </div>
                    <div class="p-Cont">
                        <div>In Stock</div>
                        <div style="color: black;">Today</div>
                    </div>
                </div>
                <div class="kh-Cont">
                    <div class="kh-Icon">
                        <img src="/Recources/kh-SVGs/delivery-truck-svgrepo-com (1) 1.svg" alt="">
                    </div>
                    <div class="p-Cont">
                        <div>Guaranteed</div>
                        <div style="color: black;">
                            <%= detail[10].value %>
                        </div>
                    </div>
                </div>

            </section>
        </div>

    </main>
    <section class="outer-Section">
        <section class="inner-Section">
            <div class="Title">Details</div>
            <p style="color: #9D9D9D; margin-top: 2rem;">Just as a book is judged by its cover, the first thing you
                notice when you pick up a modern smartphone is
                the display. Nothing surprising, because advanced technologies allow you to practically level the
                display frames and cutouts for the front camera and speaker, leaving no room for bold design solutions.
                And how good that in such realities Apple everything is fine with displays. Both critics and mass
                consumers always praise the quality of the picture provided by the products of the Californian brand.
                And last year's 6.7-inch Retina panels, which had ProMotion, caused real admiration for many.</p>
            <div class="Title">Screens</div>
            <ul>
                <%detail.forEach(items=>{%>
                    <li class="screens">
                        <div>
                            <%= items.specification_name %>
                        </div>
                        <div>
                            <%= items.value %>
                        </div>
                    </li>
                    <%})%>
            </ul>
            <div style="width: 100%;display: flex; justify-content: center; align-items: center; padding-top: 2rem;">
                <button class="viewMore-btn">View More<img src="/Recources/مخلفات/Arrow Down.png"></button>
            </div>
        </section>
    </section>







    <!-- ===== ADD: Reviews section (paste into <body>) ===== -->
    <div class="rv-wrap" role="region" aria-label="Product reviews">
        <div class="rv-title">Reviews</div>

        <div class="rv-grid">
            <!-- Left summary -->
            <aside class="rv-summary">
                <div class="rv-summary-card" aria-roledescription="rating summary">
                    <div class="rv-score">4.8</div>
                    <div class="rv-score-sub">of reviews</div>
                    <div class="rv-stars-row" aria-hidden="true">
                        <div class="rv-stars" data-rating="4.5"></div>
                    </div>
                </div>

                <div class="rv-breakdown" aria-label="rating breakdown">
                    <div class="rv-row" title="Excellent">
                        <div class="rv-label">Excellent</div>
                        <div style="display:flex;align-items:center;gap:8px;width:100% !important; position: relative;">
                            <div class="rv-track" data-percent="80"
                                style="position: absolute !important; right: 2rem !important;">
                                <div class="rv-fill"></div>
                            </div>
                            <div class="rv-count">100</div>
                        </div>
                    </div>

                    <div class="rv-row" title="Good">
                        <div class="rv-label">Good</div>
                        <div style="display:flex;align-items:center;gap:8px;width:100% !important; position: relative;">
                            <div class="rv-track" data-percent="55">
                                <div class="rv-fill"></div>
                            </div>
                            <div class="rv-count">11</div>
                        </div>
                    </div>

                    <div class="rv-row" title="Average">
                        <div class="rv-label">Average</div>
                        <div style="display:flex;align-items:center;gap:8px;width:100% !important; position: relative;">
                            <div class="rv-track" data-percent="18">
                                <div class="rv-fill"></div>
                            </div>
                            <div class="rv-count">3</div>
                        </div>
                    </div>

                    <div class="rv-row" title="Below average">
                        <div class="rv-label">Below Average</div>
                        <div style="display:flex;align-items:center;gap:8px;width:100%;">
                            <div class="rv-track" data-percent="42">
                                <div class="rv-fill"></div>
                            </div>
                            <div class="rv-count">8</div>
                        </div>
                    </div>

                    <div class="rv-row" title="Poor">
                        <div class="rv-label">Poor</div>
                        <div style="display:flex;align-items:center;gap:8px;width:100%;">
                            <div class="rv-track" data-percent="8">
                                <div class="rv-fill"></div>
                            </div>
                            <div class="rv-count">1</div>
                        </div>
                    </div>
                </div>


            </aside>
            <div class="rv-comment">
                <label for="rv-comment" class="rv-score-sub">Leave Comment</label>
                <textarea id="rv-comment" placeholder="Leave Comment"></textarea>
            </div>
            <div class="percent-Cont">
                <div class="percent">
                    <div class="fill"></div>
                </div>
                <div class="percent">
                    <div class="fill"></div>
                </div>
                <div class="percent">
                    <div class="fill"></div>
                </div>
                <div class="percent">
                    <div class="fill"></div>
                </div>
                <div class="percent">
                    <div class="fill"></div>
                </div>
            </div>
            <!-- Right reviews list -->
            <section class="rv-list" aria-label="Customer reviews">
                <%comments.forEach(comment=>{%>
                    <article class="rv-card" aria-label="Review: Grace Carey">
                        <div class="rv-avatar"><img
                                src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=300&q=60"
                                alt="Grace Carey"></div>
                        <div class="rv-body">
                            <div class="rv-head">
                                <div class="rv-meta">
                                    <div class="rv-name"><%=comment.username%></div>
                                    <div class="rv-stars-inline" data-rating="4.0"></div>
                                </div>
                                <div class="rv-date">24 January, 2023</div>
                            </div>
                            <div class="rv-text"><%=comment.text%></div>
                        </div>
                    </article>
                <%})%>
                <!-- <article class="rv-card" aria-label="Review: Grace Carey">
                    <div class="rv-avatar"><img
                            src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=300&q=60"
                            alt="Grace Carey"></div>
                    <div class="rv-body">
                        <div class="rv-head">
                            <div class="rv-meta">
                                <div class="rv-name">Grace Carey</div>
                                <div class="rv-stars-inline" data-rating="4.0"></div>
                            </div>
                            <div class="rv-date">24 January, 2023</div>
                        </div>
                        <div class="rv-text">I was a bit nervous to be buying a secondhand phone from Amazon, but I
                            couldn’t be happier with my purchase! I bought an Unlocked black iPhone 14 Pro Max in
                            excellent condition and everything is PERFECT. Highly recommend!!!</div>
                    </div>
                </article> -->

                <!-- <article class="rv-card" aria-label="Review: Ronald Richards">
                    <div class="rv-avatar"><img
                            src="https://images.unsplash.com/photo-1545996124-1b1d6f67a3b2?w=300&q=60" alt="Ronald">
                    </div>
                    <div class="rv-body">
                        <div class="rv-head">
                            <div class="rv-meta">
                                <div class="rv-name">Ronald Richards</div>
                                <div class="rv-stars-inline" data-rating="5.0"></div>
                            </div>
                            <div class="rv-date">24 January, 2023</div>
                        </div>
                        <div class="rv-text">This phone has 1T storage and is durable. Plus all the new iPhones have a C
                            port! If you want a phone that'll last, grab an iPhone 14 Pro Max.</div>
                    </div>
                </article>

                <article class="rv-card" aria-label="Review: Darcy King">
                    <div class="rv-avatar"><img
                            src="https://images.unsplash.com/photo-1544006659-f0b21884ce1d?w=300&q=60" alt="Darcy">
                    </div>
                    <div class="rv-body">
                        <div class="rv-head">
                            <div class="rv-meta">
                                <div class="rv-name">Darcy King</div>
                                <div class="rv-stars-inline" data-rating="4.0"></div>
                            </div>
                            <div class="rv-date">24 January, 2023</div>
                        </div>
                        <div class="rv-text">Camera was a little funky at first. Hoping for a software fix — otherwise
                            love this phone! Came in great condition.</div>
                        <div class="rv-attachments">
                            <img src="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=800&q=60"
                                alt="attachment1">
                            <img src="https://images.unsplash.com/photo-1512496015851-a90fb38ba796?w=800&q=60"
                                alt="attachment2">
                        </div>
                    </div>
                </article> -->

                <div class="rv-more-wrap">
                    <button class="rv-more" aria-expanded="false">View More</button>
                </div>
            </section>
        </div>
    </div>
    <!-- ===== END ADD: Reviews section ===== -->

    <footer>
        <div class="footers">
            <div class="footer-col footer-brand">
                <h2>cyber</h2>
                <p>We are a residential interior design</br> studio in Portland, creating more than</br> spaces we craft
                    experiences</p>
                <div class="fimg">
                    <a><img src="Twitter.png" alt=""></a>
                    <a><img src="Vector12.png" alt=""></a>
                    <a><img src="Vector10.png" alt=""></a>
                    <a><img src="Instagram.png" alt=""></a>
                </div>
            </div>
            <div class="footer-col">
                <h3>Services</h3>
                <ul>
                    <li><a>Bonus program</a></li>
                    <li><a>Gift cards</a></li>
                    <li><a>Credit and payment</a></li>
                    <li><a>Service contracts</a></li>
                    <li><a>Non-cash account</a></li>
                    <li><a>Payment</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Assistance to the buyer</h3>
                <ul>
                    <li><a>Find an order</a></li>
                    <li><a>Terms of delivery</a></li>
                    <li><a>Exchange and return of goods</a></li>
                    <li><a>Guarantee</a></li>
                    <li><a>FAQ</a></li>
                    <li><a>Terms of use</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            © 2025 Cyber Studio. All rights reserved.
        </div>
    </footer>
</body>
<script>
    const circles = document.querySelectorAll('.colors');
    const storage = document.querySelectorAll('.storages');
    for (let i = 0; i < storage.length; i++) {
        switch (i) {
            case 0: {
                storage[i].style.color = '#6F6F6F'
                storage[i].style.borderColor = '#D5D5D5'
                break
            }
            case 1: {
                storage[i].style.color = '#6F6F6F'
                storage[i].style.borderColor = '#D5D5D5'
                break
            }
            case 2: {
                storage[i].style.color = '#6F6F6F'
                storage[i].style.borderColor = '#D5D5D5'
                break
            }
            case 3: {
                storage[i].style.color = 'black'
                storage[i].style.borderColor = 'black'
                //storage[i].style.border= '2px , solid'
                storage[i].style.fontWeight = '500'
                break
            }
        }
    }
    for (let i = 0; i < circles.length; i++) {
        circles[i].addEventListener('click', () => {
            circles[i].style.border = '1px , solid , grey';
            circles[i].style.opacity = '100%'
            for (let j = 0; j < circles.length; j++) {
                if (j != i) {
                    circles[j].style.border = 'unset'
                    circles[j].style.opacity = '20%'
                }
            }
        })

    }

    // Fix: set .rv-fill width from parent .rv-track[data-percent]
    // Appending is enough — it will override any inline widths in HTML.
    // جایگزین تابع setRatingFills قبلی — درصدها را از counts / total محاسبه می‌کند
    (function setRatingFillsFromCounts() {
        const rows = document.querySelectorAll('.rv-row');

        // تلاش کن برای گرفتن total از متن خلاصه (e.g. "of 125 reviews")
        let total = null;
        const summaryText = document.querySelector('.rv-score-sub')?.textContent || '';
        const totalMatch = summaryText.match(/(\d{1,})/);
        if (totalMatch) total = Number(totalMatch[1]);

        // اگر پیدا نشد، مجموع rv-count ها را حساب کن
        let sumCounts = 0;
        rows.forEach(row => {
            const countEl = row.querySelector('.rv-count');
            const n = countEl ? Number((countEl.textContent || '').trim()) : 0;
            if (!Number.isNaN(n)) sumCounts += n;
        });
        if (!total) total = sumCounts || 1; // fallback به 1 برای جلوگیری از تقسیم بر صفر

        // حالا درصد هر ردیف = count / total * 100
        rows.forEach(row => {
            const track = row.querySelector('.rv-track');
            const fill = row.querySelector('.rv-fill');
            const countEl = row.querySelector('.rv-count');

            if (!track || !fill) return;

            const count = countEl ? Number((countEl.textContent || '').trim()) : NaN;

            if (Number.isFinite(count) && total > 0) {
                let pct = (count / total) * 100;
                pct = Math.max(0, Math.min(100, pct)); // clamp
                fill.style.width = pct + '%';
                // optional: set aria for accessibility
                track.setAttribute('role', 'progressbar');
                track.setAttribute('aria-valuemin', '0');
                track.setAttribute('aria-valuemax', '100');
                track.setAttribute('aria-valuenow', pct.toFixed(1));
            } else {
                // fallback: if no count, try existing data-percent attribute
                const dp = Number(track.getAttribute('data-percent'));
                if (Number.isFinite(dp)) fill.style.width = Math.max(0, Math.min(100, dp)) + '%';
            }
        });
    })();
    // ===== render stars for elements with data-rating =====
    (function renderRatingStars() {
        const starChar = '★'; // solid star glyph

        function renderFor(el) {
            const raw = el.getAttribute('data-rating') ?? '0';
            const value = Math.max(0, Math.min(5, parseFloat(raw) || 0));
            el.innerHTML = ''; // clear existing
            el.setAttribute('aria-hidden', 'true'); // decorative

            // for accessibility: set aria-label with numeric rating
            el.setAttribute('role', 'img');
            el.setAttribute('aria-label', `Rating: ${value} out of 5`);

            // build 5 stars
            for (let i = 1; i <= 5; i++) {
                const span = document.createElement('span');
                span.className = 'star empty';
                span.textContent = starChar;

                if (value >= i) {
                    // full star
                    span.className = 'star full';
                } else if (value + 0.5 >= i) {
                    // half star (if rating is x.5 or between)
                    span.className = 'star half';
                } // otherwise stays empty

                el.appendChild(span);
            }
        }

        // select targets: .rv-stars (big) and .rv-stars-inline (small) and any [data-rating]
        const targets = document.querySelectorAll('.rv-stars, .rv-stars-inline, [data-rating]');
        targets.forEach(el => {
            // avoid double-rendering if element contains children (only render when empty)
            // but we still allow re-rendering: if it already has children, replace them.
            renderFor(el);
        });
    })();

</script>

</html>